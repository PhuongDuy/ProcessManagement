@model ProcessManagement.Models.Process

@{
    ViewBag.Title = "CreateRole";
    Layout = "~/Views/Shared/_Layout.cshtml";
    var listRole = ViewData["ListRole"] as List<ProcessManagement.Models.Role>;
}


<div class="cw-workspace-header">
    <div class="cw-find-members">
        <div class="cw-add-member">
            <form action="@Url.RouteUrl("GroupLocalizedDefault", new { controller = "process", action = "createrole"})" method="POST">
                <input type="hidden" name="IdProcess" value="@Model.Id" />
                <div class="form-group">
                    <label for="cw-members-name" class="cw-required">Role</label>
                    <span class="cw-input-icon">
                        <input type="text" name="name" class="form-control cw-input-has-icon" id="rolename">
                    </span>
                    <div class="row">
                        <label class="col-sm-2"></label>
                        <div class="col-sm-10">
                            <p id="Status"></p>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="cw-members-name" class="cw-required">Role Description</label>
                    <span class="cw-input-icon">
                        <textarea name="description" class="form-control cw-input-has-icon" id="cw-description-name" ols="" rows=""></textarea>
                    </span>
                </div>

                <div>
                    <button class="btn btn-success">Add</button>
                </div>
            </form>
        </div>

        <hr class="cw-normal-hr">
        @if (listRole.Any())
        {
            <div class="cw-workspace-members-list-detail">
                <table class="cw-table-box cw-table-gray table table-hover" width="100%">
                    <thead>
                        <tr style="text-align:center">
                            <td style="max-width:100%" width="10%">Roles</td>
                            <td style="max-width:50%" width="50%">Description</td>
                            <td style="max-width:10%" width="10%"></td>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var role in listRole)
                        {
                            <tr style="text-align:center">
                                <td style="max-width:100%" width="10%">
                                    <a href="@Url.RouteUrl("GroupLocalizedDefault", new { controller = "process", action = "EditRole", roleid = role.Id })">@role.Name</a>
                                </td>
                                <td style="max-width:50%" width="50%">
                                    <p>@role.Description</p>
                                </td>
                                <td style="max-width:10%" width="100%">
                                    <a href="@Url.RouteUrl("GroupLocalizedDefault",new { controller = "process", action = "DeleteRole", roleid = role.Id })"><button class="btn btn-default"><i class="fas fa-trash-alt"></i></button></a>
                                    <a href="@Url.RouteUrl("GroupLocalizedDefault", new { controller = "process", action = "EditRole", roleid = role.Id })"><button class="btn btn-default"><i class="fas fa-edit"></i></button></a>
                                </td>
                            </tr>
                        }

                    </tbody>
                </table>
            </div>
        }

    </div>
</div>
<script>
    function RoleCheck() {
        $("#Status").html("Checking...");
        $.post("@Url.Action("CheckRoleNameAvailability", "Process")",
            {
                roledata: $("#rolename").val()
            },
            function(data) {
                if (data == 0) {
                    $("#Status").html('<font color="Green">Available !. you can take it.</font>');
                    $("#rolename").css("border-color", "Green");
                }
                else {
                    $("#Status").html('<font color="Red">That name is taken.Try another</font>');
                    $("#rolename").css("border-color", "Red");
                }
            }
        )
    }
</script>